La \textbf{Logica del Primo Ordine}, o dei Predicati è un'espansione della Logica Proposizionale. La novità principale è la presenza di due nuovi simboli detti \textbf{Quantificatori}, i quali legano più di ogni altro connettivo e ci consentiranno di descrivere strutture matematiche:
\begin{itemize}
    \item \textbf{Per ogni} - $\forall$\par
    Introduce una proprietà valida per ogni variabile a lui legata.
    \item \textbf{Esiste} - $\exists$\par
    Introduce l'esistenza di un elemento con una data proprietà.
\end{itemize}
Da qui in poi intenderò "logica dei predicati" con l'acronimo \textbf{FOL}, ovvero First Order Logic.

%

\section{Sintassi}
Essendo la FOL un'espansione della logica proposizionale, è corretto pensare che tutte le entità sintattiche studiate finora siano presenti anche in questo linguaggio.\par
Più precisamente è formato da:
\begin{itemize}
    \item \textbf{Connettivi}; $\land, \lor, \to, \bot$.
    \item \textbf{Quantificatori}; Visti poco fa, $\forall, \exists$.
    \item \textbf{Simboli di variabili}; Insieme numerabile $Var = \{v_0, v_1, ...\}$, i cui elementi si dicono variabili. Queste verranno indicate con una lettera ed indicizzate.
    \item \textbf{Simboli di relazione}; Sono tutti i simboli n-ari utilizzati per le relazioni.
    \begin{eg}
        Arietà delle relazioni\par
        Ritengo necessario approfondire, quindi ascoltami bene. Abbiamo un insieme di simboli che indicano relazioni fra variabili di un numero potenzialmente infinito, ragion per cui n-arie. In precedenza ho menzionato il significato di \textbf{arietà}, ovvero quante variabili può contenere una data relazione. Diremo, per capire meglio:
        \begin{itemize}
            \item \textbf{Relazione un-aria} $R^{(1)}$\par
            Relazione che coinvolge una singola variabile, come una semplice proprietà. L'essere un numero pari è una proprietà.
            \item \textbf{Relazione bin-aria} $R^{(2)}$\par
            Relazione che coinvolge due variabili. In questo caso possiamo parlare di operazioni come l'addizione o la moltiplicazione; infatti per eseguirle abbiamo bisogno di due variabili. Le operazioni menzionate sono dunque relazioni binarie.
        \end{itemize}
    \end{eg}
    \item \textbf{Simboli di funzione}; Simboli n-ari utilizzati come argomento per le variabili nell'insieme di lavoro. Prendiamo per esempio ogni $n \in \mathbb{N}$; avremo di conseguenza un insieme delle funzioni $F^{n}$ dove alla $n$ sostituiremo il numero apposito.
    \item \textbf{Simbolo opzionale}; Relazione binaria non appartenente a $R^{(2)}$. Se esiste un $n \geq 1$ tale che $F^{(n)} \neq \emptyset$, allora l'alfabeto $L$ deve contenere il simbolo $=$.
    \item \textbf{Simbolo ausiliare}; Parentesi tonde "$()$", punto "$.$" e virgola "$,$".
\end{itemize}
Avremo infine un insieme delle \textbf{costanti}, corrispondente a $F^{(0)}$ e denotato con \textbf{C} e l'insieme \textbf{L-stringhe}, il quale contiene tutte le stringhe componibili usando i simboli appena visti.\par\quad
Un'ulteriore novità della FOL sono i \textbf{termini}; il punto di partenza per l'ottenimento delle formule logiche.
\begin{definition}
    \textbf{L-termini}\par
    Dato l'alfabeto $L$, l'insieme $TERM_L$ dei termini è il più piccolo insieme $X$ tale che:
    \begin{itemize}
        \item $Var \in X$.
        \item $C \in X$.
        \item Se $t_1, ..., t_n \in X$ e $f$ è un simbolo di funzione n-aria, allora $f(t_1, ..., t_n) \in X$.
    \end{itemize}
\end{definition}
\begin{definition}
    \textbf{L-formule}\par
    Dato l'alfabeto $L$, l'insieme $FORM_L$ delle formule è il più piccolo insieme $X$ tale che:
    \begin{itemize}
        \item $\bot \in X$.
        \item Se $t_1, t_2 \in TERM_L$, allora $t_1 = t_2 \in X$.
        \item Se $P$ è una relazione k-aria e $t_1,...,t_k \in TERM_L$, allora $P(t_1,...,t_k) \in X$.
        \item Se $\phi, \psi \in X$, allora $\phi \circ \psi \in X$, dove $circ \in \{\land, \lor, \to\}$.
        \item Se $x \in Var$ e $\phi \in X$, allora $Qx.(\phi) \in X$, dove $Q \in \{\forall, \exists\}$.
    \end{itemize}
\end{definition}
Ovviamente l'esistenza di questi due concetti implica la presenza di \textbf{sottotermini} e \textbf{sottoformule}, dove tuttavia spiegarli risulta ridondante. Parliamo ora invece delle istanze in cui si possono trovare le variabili; ovvero \textbf{libere} e \textbf{legate}. Considera la seguente formula:
\begin{center}
    $\forall x.(P(x,y)) \to \forall z.(Q(z,x))$
\end{center}
Puoi osservare che nel primo ramo la variabile $x$ è legata dal quantificatore per ogni, mentre $y$ no, risultando quindi libera. Nel secondo ramo invece $z$ risulta quella legata. Tieni a mente inoltre che se una variabile è legata in un ramo, ciò vale solo per la specifica zona.
\begin{definition}
    \textbf{Occorrenze libere, insieme FV}\par
    Sia $\phi \in FORM_L$, allora si dice che un'occorrenza di $x \in Var$ è libera se non occorre in una sottoformula del tipo $Qx.y$, dove $Q$ è il quantificatore.\par
    Indichiamo infine l'insieme delle variabili libere con la notazione $FV[\phi]$, dove nelle parentesi quadre si inserisce il simbolo indicante una formula. Infatti con la notazione si intende il concetto di "Variabili libere nella formula $\phi$". In merito, definiamo con precisione:
    \begin{definition}
        \textbf{Insieme delle variabili libere}\par
        \begin{itemize}
            \item Sull'insieme dei termini $TERM_L$:\par
            $FV[c] = \emptyset$.\par
            $FV[x] = \{x\}$.\par
            $FV[f(t_1, ..., t_n)] = FV[t_1] \cup FV[t_2] \cup ... \cup FV[t_n]$.
            \item Sull'insieme delle formule $FORM_L$:\par
            $FV[\bot] = \emptyset$.\par
            $FV[t_1 = t_2] = FV[t_1] \cup FV[t_2]$.\par
            $FV[P(t_1, ..., t_n)] = FV[t_1] \cup ... \cup FV[t_n]$.\par
            $FV[\phi \circ \psi] = FV[\phi] \cup FV[\psi]$, dove $\circ = \{\to, \land, \lor\}$\par
            $FV[Qx.\phi] = FV[\phi] / \{x\}$, dove $Q \in \{\forall, \exists\}$.
        \end{itemize}
    \end{definition}
    \begin{definition}
        \textbf{Insieme delle variabili chiuse}\par
        \begin{itemize}
            \item Sull'insieme dei termini $TERM_L$:\par
            $BV[t] = \emptyset$.\par
            Un termine $t \in TERM_L$ si dice chiuso quando l'insieme delle variabili libere riguardante il termine è vuoto, quindi $FV[t] = \emptyset$.
            \item Sull'insieme delle formule $FORM_L$:\par
            $BV[\bot] = BV[t = u] = FV[R(t_1, ..., t_n)] = \emptyset$.\par
            $BV[\phi \circ \psi] = BV[\phi] \cup BV[\psi]$, dove  $\circ = \{\to, \land, \lor\}$\par
            $BV[Qx.\phi] = BV[\phi] \cup \{x\}$, dove $Q \in \{\forall, \exists\}$.\par
            Una formula $\phi \in FORM_L$ si dice chiusa quando al suo interno non ci sono variabili libere, quindi $FV[\phi] = \emptyset$. In questo caso si parla di \textbf{enunciato}.
        \end{itemize}
    \end{definition}
\end{definition}
Il concetto di variabile libera e legata porta con sé tutto un nuovo set di regole per la sintassi, i sistemi deduttivi e anche la semantica, perché limita lo spazio di manovra che avevamo prima, aggiungendo condizioni da rispettare. In particolare, definiamo ora la sostituzione come tale:
\begin{definition}
    \textbf{Sostituzione di una variabile}\par
    Per quanto riguarda i termini, definiamo ricorsivamente la sostituzione di una variabile $x$ con un termine $t$ in un termine $u$ come:
    \begin{itemize}
        \item $c[t/x] = c$. Che vuoi, sostituire una costante?
        \item $x[t/x] = t$.
        \item $y[t/x] = y$, per $y \neq x$.
        \item $f(t_1, ..., t_n)[t/x] = f(t_1[t/x], ..., t_n[t/x])$.
    \end{itemize}
    La sostituzione di una variabile $x$ con un termine $t$ in una formula $\phi$ è invece induttivamente definita assumendo che $t$ sia libero per $x$ in $\phi$, altrimenti l'operazione di sostituzione è indefinita.
    \begin{itemize}
        \item $\bot[t/x] = \bot$. Davvero, sostituire una variabile in una formula assurda non ha senso.
        \item $(t_1 = t_2)[t/x] = (t_1[t/x] = t_2[t/x])$. Associatività.
        \item $R(t_1, ..., t_n)[t/x] = R(t_1[t/x], ..., t_n[t/x])$.
        \item $(\phi \circ \psi)[t/x] = (\phi[t/x] \circ \psi[t/x])$, dove $\circ = \{\to, \land, \lor\}$.
        \item Con $Q \in \{\forall, \exists\}$ abbiamo i seguenti due casi:
        \begin{enumerate}
            \item Se $y = x \implies (Qx.\phi)[t/x] = (Qx.\phi)$.
            \item Se $y \neq x \implies (Qy.\phi)[t/x] = (Qy.\phi[t/x])$.
        \end{enumerate}
    \end{itemize}
\end{definition}
E questi sono i casi utili per sostituire variabili in termini e formule. Abbiamo parlato di vincoli, però; quali sono? Ebbene, sono fortunatamente solo due:
\begin{itemize}
    \item Non è possibile sostituire variabili legate a un quantificatore.
    \item Non è possibile creare vincoli diversi da quelli statati inizialmente. Ciò significa che non tutti i termini possono essere utilizzati per la sostituzione.
\end{itemize}
In merito al secondo caso, possiamo trarre una conclusione: l'unico modo per non creare ulteriori vincoli è lavorare su \textbf{termini liberi}.\par\quad
Diciamo che un termine $t$ è libero per $x$ in $\phi$, dopo la sostituzione $\phi[t/x]$ se tutte le occorrenze delle variabili in $t$ sono libere. Vediamo ora qualche esempio:
\begin{eg}
    \textbf{Sostituzioni di termini per variabili in una formula}\par
    Sia la formula $\sigma = \forall x.(R(z,x))$. Proviamo ad effettuare le seguenti sostituzioni:
    \begin{enumerate}
        \item $\forall x.(R(z,x))[f(z)/z] \to \forall x.(R(f(z),x)$. Valida, rispetta i vincoli.
        \item $\forall x.(R(z,x))[f(x)/z] \to \forall x.(R(f(x),x)$. Non va bene, crea un nuovo legame per $f(x)$. Infatti non era libero per $x$ in $\sigma$.
        \item $\forall x.(R(z,x))[f(z)/x] \to \forall x.(R(z,x))$. La sostituzione non ha effetto.
    \end{enumerate}
\end{eg}

% 

\section{Sistemi Deduttivi}
Ribadisco che in quanto \textit{estensione} della logica proposizionale, la FOL mantiene tutte le regole per la deduzione naturale studiate finora, aggiungendo solamente quelle per i quantificatori.
\begin{itemize}
    \item \textbf{Regole di per ogni} - $\forall$:
    \begin{itemize}
        \item \underline{Introduzione di $\forall$}:\par
        Per poter introdurre il per ogni, occorre che la variabile $x$ nella formula $\phi$ possa assumere un valore generico e quindi \textit{non vincolato} da nessuna delle ipotesi della derivazione, ovvero $x$ \textbf{non deve comparire libera nelle ipotesi}.\par
        Il procedimento effettua una sostituzione in $y$ per $x$ nella $\phi$, come segue:
        \begin{prooftree}
            \AxiomC{$...$}
            \UnaryInfC{$\phi(x)$}
            \RightLabel{$\forall I$}
            \UnaryInfC{$\forall y.\phi(y)$}
        \end{prooftree} La sostituzione è corretta perché $x \notin Hp(D)$, ma è stata derivata. Ci è inoltre possibile derivare $\forall x.\phi(x)$ da quanto ottenuto, perché ogni variabile è libera per sé stessa; quindi:
        \begin{prooftree}
            \AxiomC{$...$}
            \UnaryInfC{$\phi(x)$}
            \RightLabel{$\forall I$}
            \UnaryInfC{$\forall y.\phi(y)$}
            \RightLabel{$[x/y]$}
            \UnaryInfC{$\forall x.\phi(x)$}
        \end{prooftree}
        \item \underline{Eliminazione di $\forall$}:\par
        Se vale $\forall x.\phi(x)$, allora $\phi$ vale per qualunque valore di $x$ e quindi per un valore $t$ corrispondente ad un valore di $x$. $\phi(t)$ deve quindi valere per ogni termine $t$ libero per $x$ in $\phi$.
        \begin{prooftree}
            \AxiomC{$...$}
            \UnaryInfC{$\forall x.\phi(x)$}
            \RightLabel{$\forall E$}
            \UnaryInfC{$\phi(t)$}
        \end{prooftree} Non ci sono problemi per quanto riguarda l'ipotesi. Puoi eliminare il per ogni anche se parti da quella formula.
    \end{itemize}
    \item \textbf{Regole di esiste} - $\exists$:
    \begin{itemize}
        \item \underline{Introduzione di $\exists$}:\par
        Diciamo che se è possibile derivare $\phi(t)$ per un termine $t$, si deduce che esista una $x$ tale per cui valga $\phi(x)$.\par\quad
        Quindi, se una proprietà vale per $t$, allora esiste un valore $x$ per cui continua a valere dove $t$ è libero per $x$ nella proprietà.
        \begin{prooftree}
            \AxiomC{$...$}
            \UnaryInfC{$\phi(t)$}
            \RightLabel{$\exists I$}
            \UnaryInfC{$\exists x.\phi(x)$}
        \end{prooftree}
        \item \underline{Eliminazione di $\exists$}:\par
        Resa più comprensibile se vista come la scrittura compatta di $[\phi(0) \lor \phi(1) \lor ... \lor \phi(n)]$, dove almeno una di queste proprietà è valida sull'insieme di lavoro.
        \begin{prooftree}
            \AxiomC{$\exists x.\phi(x)$}
            \AxiomC{$[\phi[t/x]]^k$}
            \UnaryInfC{$...$}
            \UnaryInfC{$\gamma$}
            \RightLabel{$\exists E^k$}
            \BinaryInfC{$\gamma$}
        \end{prooftree}
        In questa formula è necessario aver derivato $\exists x.\phi(x)$. Siccome non si hanno informazioni aggiuntive su quale valore faccia valere $\phi$, allora non è possibile avere una regola generale che faccia derivare $\phi(t)$ da questa formula per un termine $t$.\par
        Più semplicemente, deriva $\exists x.\phi(x)$ per poter concludere la formula $\gamma$.
    \end{itemize}
\end{itemize}

%

\section{Semantica}
Per poter lavorare con il significato della FOL, è necessario prima introdurre il concetto di struttura matematica.
\begin{definition}
    \textbf{Struttura matematica}\par
    Quadrupla del tipo: $U = \left<A, \mathbb{R}, \mathbb{F}, \mathbb{C}\right>$, dove:
    \begin{itemize}
        \item $A$ è l'insieme rappresentante il dominio della struttura, il quale non deve essere vuoto.
        \item $\mathbb{R}$ è l'insieme delle relazioni sul dominio.
        \item $\mathbb{F}$ è l'insieme delle funzioni sul dominio.
        \item $\mathbb{C}$ è un sottoinsieme del dominio che contiene gli elementi costanti.
    \end{itemize}
    \begin{eg}
        Considera una quadrupla coi seguenti campi:
        \begin{itemize}
        \item $A = \mathbb{N}$, ovvero l'insieme dei numeri naturali. 
        \item $\mathbb{R} = \{\leq\}$, ovvero l'insieme delle relazioni della struttura è composto dalla sola relazione di maggiore o uguale.
        \item $\mathbb{F} = \{+,\times,succ\}$, ovvero le funzioni attuabili sull'insieme sono somma, moltiplicazione e successivo.
        \item $\mathbb{C} = \{0,1\}$, ovvero che le costanti di questo insieme sono i numeri $0, 1$.
    \end{itemize}
    \end{eg}
\end{definition}
A queste strutture è possibile associare un linguaggio della FOL; introducendo il concetto di \textbf{L-Struttura}, la quale sarà poi semanticamente interpretata mediante una \textbf{U-Valutazione}.
\begin{definition}
    \textbf{L-Struttura/L-Interpretazione}\par
    Corrisponde ad ogni coppia $U = \left<A, (\_)^U\right>$ con dominio $A \neq \emptyset$ e funzione $(\_)^U$ la quale assegna un'interpretazione agli oggetti base del linguaggio. Espandendo:
    \begin{itemize}
        \item $\forall c \in C$ assegna un elemento $c^U \in A$.
        \item $\forall f \in F^k$, con $k > 0$, assegna una funzione $f^U:A^k \to A \in \mathbb{F}$.
        \item $\forall R \in R^n$, con $n > 0$, assegna una relazione $R^U \subseteq A^n \in \mathbb{R}$.
    \end{itemize}
    \begin{definition}
        \textbf{U-Valutazione}\par
        Data una $L$-struttura $U$, la $U$-valutazione è una funzione $\rho:Var \to |U|$, dove la scrittura $|U|$ indica il dominio della struttura.
    \end{definition}
\end{definition}
Useremo la notazione $\rho_U$ per indicare una valutazione sulla struttura $U$. Se si considera una $L$-struttura $U$ e un elemento $a \in |U|$, con $\rho[a/x]$, allora possiamo denotare la valutazione come:
\begin{center}
    $\rho_U[a/x](y) = \begin{cases}
        x \neq y \to \rho_U(y)\\
        a
    \end{cases}$
\end{center}
\begin{definition}
    \textbf{Interpretazione dei termini}\par
    Dato un linguaggio $L$ ed una $L$-struttura $U$, definiamo ricorsivamente la funzione di interpretazione $[\_]^U:\mathcal{E}_U \to TERM_L \to |U|$.
    \begin{itemize}
        \item $[c]_{\rho_U}^{U} = c^U$.
        \item $[x]_{\rho_U}^{U} = \rho_U(x)$
        \item $[f(t_1, ..., t_n)]_{\rho_U}^{U} = f^U([t_1]_{\rho_U}^{U}, ..., [t_n]_{\rho_U}^{U})$.
    \end{itemize}
\end{definition}



% - Continua da qua - Pag.86 dispense

\section{Esercizi}









%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\section{Appunti}
\subsection{Derivazione Semantica}
\subsection{Teoremi di Correttezza e Completezza}
formalizzazione, contromodello, struttura di Peano